# CoTURN TURN Server Configuration
# For WebRTC relay-only connections (no IP leakage)

# Listening IP addresses
# Replace with your server's public IP
listening-ip=0.0.0.0
# relay-ip=YOUR_PUBLIC_IP

# External IP (required for NAT/firewall traversal)
# Replace with your server's public IP
# external-ip=YOUR_PUBLIC_IP

# Listening ports
listening-port=3478
tls-listening-port=5349

# Relay port range (for media traffic)
min-port=49152
max-port=65535

# Enable verbose logging
verbose

# Log file
# Logs are sent to stdout/stderr for Docker
# log-file=/var/log/coturn/turnserver.log

# Realm (authentication realm)
realm=turn.example.com

# Server name
server-name=coturn

# Authentication
# Use long-term credentials
lt-cred-mech

# User credentials (username:password)
# Format: user=username:password
# CHANGE THESE CREDENTIALS FOR PRODUCTION!
user=turnuser:turnpassword

# Deny private IP ranges (security)
no-loopback-peers
no-multicast-peers

# Enable fingerprinting
fingerprint

# TLS/DTLS certificates (for TURNS)
# Uncomment and configure if using TURNS
# cert=/path/to/cert.pem
# pkey=/path/to/privkey.pem

# Cipher list for TLS
cipher-list="ECDHE-RSA-AES256-GCM-SHA512:DHE-RSA-AES256-GCM-SHA512:ECDHE-RSA-AES256-GCM-SHA384:DHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-SHA384"

# Disable UDP (optional - forces TCP/TLS relay)
# no-udp

# Enable TCP relay
no-tcp-relay

# Mobility support
mobility

# Disable CLI (Docker doesn't need it)
no-cli

# Max bps (bandwidth) per session (0 = unlimited)
max-bps=0

# Total quota MB per user (0 = unlimited)
user-quota=0

# Total quota MB per session (0 = unlimited)
total-quota=0

# Denied peer IPs (security - block private ranges)
denied-peer-ip=0.0.0.0-0.255.255.255
denied-peer-ip=10.0.0.0-10.255.255.255
denied-peer-ip=100.64.0.0-100.127.255.255
denied-peer-ip=127.0.0.0-127.255.255.255
denied-peer-ip=169.254.0.0-169.254.255.255
denied-peer-ip=172.16.0.0-172.31.255.255
denied-peer-ip=192.0.0.0-192.0.0.255
denied-peer-ip=192.0.2.0-192.0.2.255
denied-peer-ip=192.88.99.0-192.88.99.255
denied-peer-ip=192.168.0.0-192.168.255.255
denied-peer-ip=198.18.0.0-198.19.255.255
denied-peer-ip=198.51.100.0-198.51.100.255
denied-peer-ip=203.0.113.0-203.0.113.255
denied-peer-ip=240.0.0.0-255.255.255.255

# Allowed peer IPs (allow all public ranges)
# This is implicit - everything not denied is allowed

# Enable STUN
# stun-only

# Disable STUN (TURN-only mode for maximum privacy)
# no-stun

# Production-ready settings
stale-nonce=600
# Prevent DOS attacks
max-allocate-lifetime=3600
channel-lifetime=600
permission-lifetime=300
